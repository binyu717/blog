<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基础知识点 | JAVA之路</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" type="image/x-icon" href="./avatar.png">
    <meta name="description" content="行你所行，听从你心">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b6bfb1ac.css" as="style"><link rel="preload" href="/blog/assets/js/app.f7a9413c.js" as="script"><link rel="preload" href="/blog/assets/js/2.ddedf7b8.js" as="script"><link rel="preload" href="/blog/assets/js/9.4472f6b1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.28823f80.js"><link rel="prefetch" href="/blog/assets/js/11.907d6de2.js"><link rel="prefetch" href="/blog/assets/js/12.e0480859.js"><link rel="prefetch" href="/blog/assets/js/13.197b8968.js"><link rel="prefetch" href="/blog/assets/js/14.327ec1cf.js"><link rel="prefetch" href="/blog/assets/js/15.e4a62733.js"><link rel="prefetch" href="/blog/assets/js/16.7e8254c4.js"><link rel="prefetch" href="/blog/assets/js/17.a5fd2c58.js"><link rel="prefetch" href="/blog/assets/js/18.09512bd4.js"><link rel="prefetch" href="/blog/assets/js/19.4093ac92.js"><link rel="prefetch" href="/blog/assets/js/20.0a325460.js"><link rel="prefetch" href="/blog/assets/js/21.41949fa9.js"><link rel="prefetch" href="/blog/assets/js/22.aebd4cfb.js"><link rel="prefetch" href="/blog/assets/js/23.f9a7fbea.js"><link rel="prefetch" href="/blog/assets/js/24.e1b48ee8.js"><link rel="prefetch" href="/blog/assets/js/25.b990b784.js"><link rel="prefetch" href="/blog/assets/js/26.a87045c1.js"><link rel="prefetch" href="/blog/assets/js/27.054622f5.js"><link rel="prefetch" href="/blog/assets/js/28.641f720a.js"><link rel="prefetch" href="/blog/assets/js/29.4b365e5d.js"><link rel="prefetch" href="/blog/assets/js/3.b2bfae33.js"><link rel="prefetch" href="/blog/assets/js/30.46ac7154.js"><link rel="prefetch" href="/blog/assets/js/31.396b63a7.js"><link rel="prefetch" href="/blog/assets/js/32.27b8aea8.js"><link rel="prefetch" href="/blog/assets/js/33.2bdab81b.js"><link rel="prefetch" href="/blog/assets/js/34.0c7b821a.js"><link rel="prefetch" href="/blog/assets/js/35.2c48d1d3.js"><link rel="prefetch" href="/blog/assets/js/4.fbcf4621.js"><link rel="prefetch" href="/blog/assets/js/5.ec4b3f90.js"><link rel="prefetch" href="/blog/assets/js/6.27888615.js"><link rel="prefetch" href="/blog/assets/js/7.e23a1d77.js"><link rel="prefetch" href="/blog/assets/js/8.1314a140.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b6bfb1ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">JAVA之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://caibaojian.com/vuepress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://caibaojian.com/vuepress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java</span> <span class="arrow down"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mysql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>oracle</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>postgresql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>windows</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单元测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>问题积累</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="基础知识点"><a href="#基础知识点" class="header-anchor">#</a> 基础知识点</h2> <h3 id="coalesce-函数"><a href="#coalesce-函数" class="header-anchor">#</a> COALESCE()函数</h3> <ul><li>表达式：COALESCE ( expression,value1,value2……,valuen)<br>
COALESCE()函数的第一个参数expression为待检测的表达式，而其后的参数个数不定。<br>
COALESCE()函数将会返回包括expression在内的所有参数中的第一个非空表达式。<br>
如果所有的表达式都为空值，则返回NULL。</li></ul> <h3 id="显示mysql查询进程"><a href="#显示mysql查询进程" class="header-anchor">#</a> 显示mysql查询进程</h3> <ul><li>show processlist;</li> <li>command列，显示当前连接的执行的命令，一般就是休眠（sleep），查询（query），连接（connect）。time列，此这个状态持续的时间，单位是秒。state列，显示使用当前连接的sql语句的状态</li> <li>kill pid</li></ul> <h3 id="json字段查询"><a href="#json字段查询" class="header-anchor">#</a> json字段查询</h3> <p>查询json</p> <ul><li>json_contains 判断是否包含某个json值</li> <li>json_contains_path 判断某个路径下是否包json值</li> <li>json_extract 提取json值</li> <li>column-&gt;path json_extract的简洁写法，MySQL 5.7.9开始支持</li> <li>column-&gt;&gt;path json_unquote(column -&gt; path)的简洁写法</li> <li>json_keys 提取json中的键值为json数组</li> <li>json_search 按给定字符串关键字搜索json，返回匹配的路径&gt;</li></ul> <h3 id="修改json"><a href="#修改json" class="header-anchor">#</a> 修改json</h3> <ul><li>json_append 废弃，MySQL 5.7.9开始改名为json_array_append</li> <li>json_array_append 末尾添加数组元素，如果原有值是数值或json对 象，则转成数组后，再添加元素</li> <li>json_array_insert 插入数组元素</li> <li>json_insert 插入值（插入新值，但不替换已经存在的旧值）</li> <li>json_merge 合并json数组或对象</li> <li>json_remove 删除json数据</li> <li>json_replace 替换值（只替换已经存在的旧值）</li> <li>json_set 设置值（替换旧值，并插入不存在的新值）</li> <li>json_unquote 去除json字符串的引号，将值转成string类型&gt;</li></ul> <h3 id="返回json属性"><a href="#返回json属性" class="header-anchor">#</a> 返回json属性</h3> <ul><li>json_depth 返回json文档的最大深度</li> <li>json_length 返回json文档的长度</li> <li>json_type 返回json值得类型</li> <li>json_valid 判断是否为合法json文档</li></ul> <h3 id="mysql-事务隔离级别设置"><a href="#mysql-事务隔离级别设置" class="header-anchor">#</a> MySQL-事务隔离级别设置</h3> <ul><li>read uncommitted (未提交读)：是最低的隔离级别，可以读取未提交的数据，造成脏读现象；</li> <li>read committed(已提交读)：已提交读隔离级别解决了脏读的问题，但是出现了不可重复读的问题，即事务A在两次查询的数据不一致，因为在两次查询之间事务B更新了一条数据。已提交读只允许读取已提交的记录，但不要求可重复读。</li> <li>repeatable read(可重复读)：是MySQL的默认事务隔离级别，能确保事务在并发读取数据时会看到同样的数据行，解决了READ-COMMITTED隔离级别下的不可重复读问题,但还会出现幻读现象。</li> <li>SERIALIZABLE： 这是事务的最高隔离级别，通过强制事务排序，使之不可能相互冲突，就是在每个读的数据行加上共享锁来实现。在该隔离级别下，可以解决前面出现的脏读、不可重复读和幻读问题，但也会导致大量的超时和锁竞争现象，一般不推荐使用</li></ul> <h4 id="并发问题"><a href="#并发问题" class="header-anchor">#</a> 并发问题</h4> <ul><li>1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据</li> <li>2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。</li> <li>3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。</li> <li>不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表</li></ul> <h2 id="experience"><a href="#experience" class="header-anchor">#</a> experience</h2> <h3 id="on条件与where条件的区别"><a href="#on条件与where条件的区别" class="header-anchor">#</a> on条件与where条件的区别</h3> <ul><li>on条件是在生成临时表时使用的条件，它不管on中的条件是否为真，都会返回左边表中的记录</li> <li>where条件是在临时表生成好后，再对临时表进行过滤的条件。这时已经没有left join的含义（必须返回左边表的记录）了，条件不为真的就全部过滤掉。</li> <li>所以在使用left join,right join,full join关联表查询时，不管on上的条件是否为真都会返回left或right表中的记录，full则具有left和right的特性的并集。 而inner jion没这个特殊性，则条件放在on中和where中，返回的结果集是相同的。</li></ul> <h3 id="mysql之排序查询"><a href="#mysql之排序查询" class="header-anchor">#</a> MYSQL之排序查询</h3> <ul><li>按编码排序：convert('column' USING 'gbk)</li></ul> <blockquote><div class="language- extra-class"><pre><code>数据库编码              排序   
utf8/utf8mb4           按英文字母规则排序 &quot;a,b,c..... &quot;
gbk                    按汉字首字母排序 效果如上图   
</code></pre></div></blockquote> <ul><li>按照指定字段的指定数据进行排序
<ul><li>FILED(coulmn,str1,str2,str3…)<br>
字段coulmn按照字符串str1，str2，str3的顺序返回查询到的结果集。如果表中str字段值不存在于str1， str2，str3中的记录，放在结果集最前面返回。<br>
eg： SELECT audit_status FROM product order by FIELD(audit_status ,'auditing','enabled','not_enabled','rejected')</li> <li>FIND_IN_SET(str,strlist)<br>
str 要查询的字符串<br>
strlist 字段名 参数以英文”,”分隔 如 (1,2,6,8)<br>
查询字段(strlist)中包含(str)的结果，返回结果为null或记录<br>
eg: SELECT audit_status FROM product  ORDER BY FIND_IN_SET(audit_status,'enabled,not_enabled,rejected,auditing')</li></ul></li></ul> <h3 id="mysql之find-in-set函数"><a href="#mysql之find-in-set函数" class="header-anchor">#</a> MYSQL之FIND_IN_SET函数</h3> <ul><li>排序（s上述已介绍，不再赘述）</li> <li>当做查询条件,类似LIKE,Find_IN_SET 是精确匹配,like是广泛的模糊匹配。Find_IN_SET查询的结果要小于like查询的结果</li> <li>props存放的是产品的属性,可以为多个，下面sql查询包含2属性的产品<br>
eg:SELECT props FROM product WHERE FIND_IN_SET('2', props)</li></ul> <h3 id="sql优化"><a href="#sql优化" class="header-anchor">#</a> sql优化</h3> <ul><li>explain出来的各种item的意义；
<ul><li>select_type:表示查询中每个select子句的类型</li> <li>type:表示MySQL在表中找到所需行的方式，又称“访问类型”</li> <li>possible_keys:指出MySQL能使用哪个索引在表中找到行，查询涉及到的字段上若存在索引，则该索引将被列出，但不一定被查询使用</li> <li>key:显示MySQL在查询中实际使用的索引，若没有使用索引，显示为NULL</li> <li>key_len:表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度</li> <li>ref:表示上述表的连接匹配条件，即哪些列或常量被用于查找索引列上的值</li> <li>Extra:包含不适合在其他列中显示但十分重要的额外信息</li></ul></li> <li>profile
<ul><li>SHOW VARIABLES LIKE '%profiling%'; 查看是否开启</li> <li>set profiling=1; 开启profiling</li> <li>SHOW PROFILES 获取queryId;</li> <li>SHOW PROFILE [ALL] FOR QUERY queryId; 查询详细信息</li></ul></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.f7a9413c.js" defer></script><script src="/blog/assets/js/2.ddedf7b8.js" defer></script><script src="/blog/assets/js/9.4472f6b1.js" defer></script>
  </body>
</html>
